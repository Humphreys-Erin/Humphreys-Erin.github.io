<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<title>weatherdata</title>
	
   
   <body>
		<h2>Using XMLHTTP Request to Consume a JSON Web Service</h2>
		<h3 id="welcomeMessage">Temperature request by city</h3>
		
		
		
		<p class="EnterInfo">Enter city name below and click Submit to see current temp</p>
		<input type="text" id="city" placeholder="Atlanta"><br>
		<br>
		<button onClick="getCity()">Submit</button><br>
		<p id="getWeather"></p><br><br>
		
		
		
		<script>
		function getCity() {
			var data = document.getElementById("city").value;
			var api = "http://api.openweathermap.org/data/2.5/weather?q=";
			var apiKey = "&APPID=e1a6a5ad685592c73cafa849c7a2f5c6&units=imperial";
			var url = api.concat(data, apiKey);
			
			
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var text = JSON.parse(xhttp.responseText);
					
					document.getElementById("getWeather").innerHTML = "The current temperature is: " + text.main.temp + " in " + data;
				}
			};
			xhttp.open("GET", url, true);
			xhttp.send();
		}
		</script>
		
	    <hr>
       <a href="index.html">Topic List</a>
   </body>
</html>
</html>
